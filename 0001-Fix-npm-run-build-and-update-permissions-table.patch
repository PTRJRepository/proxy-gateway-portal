From 30f09761e93ab79c349ef5d8dad73356d52c09eb Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Tue, 13 Jan 2026 08:25:31 +0700
Subject: [PATCH] Fix npm run build and update permissions table

---
 .env.production                               |  28 +++
 .gitignore                                    | 191 +++++++++++++++---
 .../components/PermissionsTable.tsx           |   6 +-
 3 files changed, 189 insertions(+), 36 deletions(-)
 create mode 100644 .env.production

diff --git a/.env.production b/.env.production
new file mode 100644
index 0000000..7e81d86
--- /dev/null
+++ b/.env.production
@@ -0,0 +1,28 @@
+# Production Environment Configuration
+# Gunakan IP production: 223.25.98.220 atau fallback 10.0.0.110
+
+NODE_ENV=production
+
+# Server Configuration
+PORT=3001
+NEXTAUTH_URL=http://localhost:3001
+
+# Cookie Configuration
+# Set to false untuk localhost HTTP testing
+COOKIE_SECURE=false
+
+# Backend Service Hosts (Primary and Fallback)
+BACKEND_HOST=localhost
+BACKEND_HOST_FALLBACK=localhost
+
+# Service Ports
+UPAH_PORT=5175
+ABSEN_PORT=5176
+MONITORING_BERAS_PORT=5177
+
+# SQL Server Configuration (Production)
+MSSQL_HOST=10.0.0.110
+MSSQL_PORT=1433
+MSSQL_USER=sa
+MSSQL_PASSWORD=ptrj@123
+MSSQL_DATABASE=extend_db_ptrj
diff --git a/.gitignore b/.gitignore
index 2e26120..18507b4 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,44 +1,169 @@
-# Environment files - NEVER commit these
-.env
-.env.*
-.env.local
-.env.development
-.env.staging
-.env.production
-!.env.example
-
-# Database credentials and secrets
-*.pem
-*.key
-*.crt
-*.p12
-*.pfx
-secrets/
-credentials/
-
-# Node
+# Dependencies
 node_modules/
 npm-debug.log*
 yarn-debug.log*
 yarn-error.log*
+.pnp
+.pnp.js
 
+# Production node_modules
+/dist
+/build
 
-# IDE
-.idea/
-.vscode/
-*.swp
-*.swo
+# Environment variables
+.env
+.env.local
+.env.development.local
+.env.test.local
+.env.production.local
 
-# OS files
-.DS_Store
-Thumbs.db
-nul
-temp_nul_file
+# Keys and certificates (specifically for your project)
+keys/
+
+# Runtime data
+pids
+*.pid
+*.seed
+*.pid.lock
+
+# Directory for instrumented libs generated by jscoverage/JSCover
+lib-cov
+
+# Coverage directory used by tools like istanbul
+coverage
+*.lcov
+
+# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
+.grunt
+
+# Bower dependency directory (https://bower.io/)
+bower_components
+
+# node-waf configuration
+.lock-wscript
+
+# Compiled binary addons (https://nodejs.org/api/addons.html)
+build/Release
+
+# Dependency directories
+jspm_packages
+
+# TypeScript v1 declaration files
+typings/
+
+# TypeScript cache
+*.tsbuildinfo
+
+# Optional npm cache directory
+.npm
+
+# Optional eslint cache
+.eslintcache
+
+# Microbundle cache
+.rpt2_cache/
+.rts2_cache_cjs/
+.rts2_cache_es/
+.rts2_cache_umd/
+
+# Optional REPL history
+.node_repl_history
+
+# Output of 'npm pack'
+*.tgz
+
+# Yarn Integrity file
+.yarn-integrity
+
+# dotenv environment variables file
+.env
+
+# next.js build output
+.next
+out/
+
+# nuxt.js build output
+.nuxt
+dist
+
+# vuepress build output
+.vuepress/dist
+
+# Serverless directories
+.serverless/
+
+# FuseBox cache
+.fusebox/
+
+# DynamoDB Local files
+.dynamodb/
+
+# TernJS port file
+.tern-port
+
+# Stores VSCode versions used for testing VSCode extensions
+.vscode-test
+
+# yarn v2
+.yarn/cache
+.yarn/unplugged
+.yarn/build-state.yml
+.yarn/install-state.gz
+.pnp.*
 
 # Logs
-logs/
+logs
 *.log
 
-# Temp files
-temp_*.txt
-*.tmp
\ No newline at end of file
+# Runtime data
+*.pid
+*.seed
+
+# Coverage directory used by tools like istanbul
+coverage/
+lib-cov/
+
+# Temporary folders
+tmp/
+temp/
+
+# OS generated files
+.DS_Store
+.DS_Store?
+._*
+.Spotlight-V100
+.Trashes
+ehthumbs.db
+Thumbs.db
+
+# IDE specific files
+.vscode/*
+!.vscode/settings.json
+!.vscode/tasks.json
+!.vscode/launch.json
+!.vscode/extensions.json
+.idea
+*.swp
+*.swo
+*~
+
+# Build outputs
+build/
+dist/
+out/
+
+# Cache directories
+.cache/
+.nyc_output
+
+# Local configuration files that might contain sensitive data
+config.local.js
+local.properties
+
+# Database files
+*.db
+*.db-journal
+
+# Sensitive files (shouldn't be in version control)
+private.key
+secret.key
\ No newline at end of file
diff --git a/Dashboard_Utama/components/PermissionsTable.tsx b/Dashboard_Utama/components/PermissionsTable.tsx
index e5a974b..fddab0f 100644
--- a/Dashboard_Utama/components/PermissionsTable.tsx
+++ b/Dashboard_Utama/components/PermissionsTable.tsx
@@ -14,7 +14,7 @@ const ROLES = ['ADMIN', 'KERANI', 'MNGR', 'ASISTEN', 'MANDOR'] // Add other role
 
 export default function PermissionsTable({ services, permissions }: PermissionsTableProps) {
     const [isPending, startTransition] = useTransition()
-    ion[] > (permissions)
+    const [optimisticPermissions, setOptimisticPermissions] = useState<RolePermission[]>(permissions)
 
     const hasPermission = (role: string, serviceId: string) => {
         return optimisticPermissions.some(p => p.role === role && p.serviceId === serviceId)
@@ -93,8 +93,8 @@ export default function PermissionsTable({ services, permissions }: PermissionsT
                                                 onClick={() => handleToggle(role, service.serviceId)}
                                                 disabled={isPending}
                                                 className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all duration-200 ${access
-                                                    ? 'bg-emerald-100 text-emerald-600 hover:bg-emerald-200 shadow-sm'
-                                                    : 'bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600'
+                                                        ? 'bg-emerald-100 text-emerald-600 hover:bg-emerald-200 shadow-sm'
+                                                        : 'bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600'
                                                     }`}
                                             >
                                                 {access ? <Check className="w-5 h-5" /> : <X className="w-4 h-4" />}
-- 
2.50.1.windows.1

